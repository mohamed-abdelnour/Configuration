#!/usr/bin/env dash

query_format() {
    query="$(printf '%s\n' "$1" | sed 's/ /+/g')"
}

if [ "$1" = '-o' ]; then
    search_path='options'
    query_format "$2"
elif [ -n "$1" ]; then
    search_path='packages'
    query_format "$1"
else
    exit 1
fi

url="https://search.nixos.org/$search_path?channel=unstable&query=$query"

firefox "$url" 2> /dev/null &
